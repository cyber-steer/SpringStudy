<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Statement"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%
	// 1. JDBC driver를 로드한다.
	Class.forName("org.mariadb.jdbc.Driver");
	
	// 2. DB와의 연결(Connection)을 생성한다.
	String url = "jdbc:mariadb://localhost:3333/springdb";
	String user = "spring";
	String pwd= "1111";
	Connection con = DriverManager.getConnection(url, user, pwd);
	
	// 3. 연결후 그 통로를 통해 SQL문을 실행한다.
	String sql = "select * from board";
	Statement stmt = con.createStatement();
	
	//4 SQL 실행
	ResultSet rs = stmt.executeQuery(sql);
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
        <thead>
            <tr>
                <th scope="col">제목</th>
                <th scope="col">이름</th>
                <th scope="col">고유번호</th>
            </tr>
        </thead>
        <tbody>
         <%
		        while(rs.next()){
		    		String title = rs.getString("bcode");
		    		String name = rs.getString("subject");
		    		String idx = rs.getString("regdate");
	    		%>
	    			<tr>
	                <td class="title">
	                    <a href="BoardUpdate.jsp?idx=<%=idx%>"><%=title %></a>
	                </td>
	                <td class="name"><%=name %></td>
	                <td class="name"><%=idx %></td>
	            </tr>
	    		<%
	            
		    		}
		    		rs.close();
		    		stmt.close();
		    		con.close();
	    		%>
        </tbody>
    </table>

</body>
</html>